---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navigation from '../components/Navigation.astro';
import MobileAppHeader from '../components/MobileAppHeader.astro';
import Footer from '../components/Footer.astro';
import CalendarBooking from '../components/CalendarBooking.astro';
---

<BaseLayout title="Contact Us - Shallow Bay Advisors">
  <Navigation />
  <MobileAppHeader />

  <main class="pt-20">
    <!-- Hero Section -->
    <section class="pt-16 md:pt-28 pb-12 md:pb-20">
      <div class="max-w-4xl mx-auto px-6 text-center">
        <h1 class="text-3xl md:text-5xl font-light text-gray-900 mb-6 font-['Poppins'] tracking-tight leading-tight">
          Get in Touch
        </h1>

        <p class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
          Ready to find your perfect warehouse space? Our team is here to help you discover opportunities from Miami-Dade all the way to Port St. Lucie.
        </p>
      </div>
    </section>

    <!-- Contact Methods -->
    <section class="py-16">
      <div class="max-w-6xl mx-auto px-6">
        <div class="grid md:grid-cols-3 gap-8">

          <!-- Phone Contact -->
          <div class="bg-white border border-gray-200 rounded-xl p-8 hover:shadow-lg transition-all duration-200">
            <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mb-6">
              <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
            </div>

            <h3 class="text-lg font-semibold text-gray-900 mb-3">Call Us Directly</h3>
            <p class="text-gray-600 mb-6">Speak with our warehouse specialists for immediate assistance.</p>

            <a href="tel:954-614-5352" class="inline-flex items-center px-6 py-3 bg-sba-navy text-white font-semibold rounded-lg hover:bg-sba-navy-dark transition-all duration-200">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
              (954) 614-5352
            </a>
          </div>

          <!-- Email Contact -->
          <div class="bg-white border border-gray-200 rounded-xl p-8 hover:shadow-lg transition-all duration-200">
            <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mb-6">
              <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
            </div>

            <h3 class="text-lg font-semibold text-gray-900 mb-3">Send Us an Email</h3>
            <p class="text-gray-600 mb-6">Get detailed information and property listings delivered to your inbox.</p>

            <a href="mailto:info@shallowbayadvisors.com" class="inline-flex items-center px-6 py-3 border-2 border-sba-navy text-sba-navy font-semibold rounded-lg hover:bg-sba-navy hover:text-white transition-all duration-200">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
              Email Us
            </a>
          </div>

          <!-- Schedule Consultation -->
          <div class="bg-white border border-gray-200 rounded-xl p-8 hover:shadow-lg transition-all duration-200">
            <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mb-6">
              <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3a1 1 0 012 0v4m0 0V3a1 1 0 112 0v4m0 0a1 1 0 01-1 1H9a1 1 0 01-1-1m8 0V3a1 1 0 00-2 0v4m0 0V3a1 1 0 00-2 0v4m0 0a1 1 0 001 1h1a1 1 0 001-1M7 21h10a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
            </div>

            <h3 class="text-lg font-semibold text-gray-900 mb-3">Schedule Meeting</h3>
            <p class="text-gray-600 mb-6">Book a consultation to discuss your warehouse needs in detail.</p>

            <a href="/book-consultation" class="inline-flex items-center px-6 py-3 bg-gray-100 text-gray-900 font-semibold rounded-lg hover:bg-gray-200 transition-all duration-200">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3a1 1 0 012 0v4m0 0V3a1 1 0 112 0v4m0 0a1 1 0 01-1 1H9a1 1 0 01-1-1m8 0V3a1 1 0 00-2 0v4m0 0V3a1 1 0 00-2 0v4m0 0a1 1 0 001 1h1a1 1 0 001-1M7 21h10a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
              Book Now
            </a>
          </div>

        </div>
      </div>
    </section>

    <!-- Property Interest Section -->
    <section class="py-16 bg-gray-50">
      <div class="max-w-6xl mx-auto px-6">
        <div class="text-center mb-16">
          <h2 class="text-2xl md:text-3xl font-semibold text-gray-900 mb-4">
            Did a Property Catch Your Eye?
          </h2>
          <p class="text-lg text-gray-600 max-w-2xl mx-auto">
            Schedule a personalized consultation to discuss specific properties or tour multiple options that match your criteria
          </p>
        </div>

        <!-- Calendar Booking Section -->
        <div class="max-w-2xl mx-auto">
          <div class="bg-white rounded-xl p-8 shadow-lg border border-gray-200">
            <CalendarBooking
              title=""
              subtitle=""
              buttonText="Schedule Property Tour"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Custom Requirements Section -->
    <section class="py-16">
      <div class="max-w-6xl mx-auto px-6">
        <div class="grid lg:grid-cols-2 gap-12 items-center">

          <!-- Left Side: Content -->
          <div>
            <h2 class="text-2xl md:text-3xl font-semibold text-gray-900 mb-6">
              Didn't Find What You're Looking For?
            </h2>
            <div class="space-y-4 mb-8">
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-1">
                  <svg class="w-3 h-3 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <div>
                  <h4 class="font-medium text-gray-900 mb-1">Off-Market Properties</h4>
                  <p class="text-gray-600 text-sm">Access exclusive listings not available to the public</p>
                </div>
              </div>
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-1">
                  <svg class="w-3 h-3 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <div>
                  <h4 class="font-medium text-gray-900 mb-1">Custom Match Service</h4>
                  <p class="text-gray-600 text-sm">We'll find properties that match your exact requirements</p>
                </div>
              </div>
              <div class="flex items-start space-x-3">
                <div class="w-6 h-6 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-1">
                  <svg class="w-3 h-3 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                  </svg>
                </div>
                <div>
                  <h4 class="font-medium text-gray-900 mb-1">Market Intelligence</h4>
                  <p class="text-gray-600 text-sm">Leverage our deep market knowledge and connections</p>
                </div>
              </div>
            </div>

            <!-- Call Button -->
            <a
              href="tel:954-614-5352"
              class="inline-flex items-center bg-sba-navy text-white px-6 py-3 rounded-lg font-semibold hover:bg-sba-navy-dark transition-all duration-200"
            >
              <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
              </svg>
              Call (954) 614-5352
            </a>
          </div>

          <!-- Right Side: Form -->
          <div class="bg-white rounded-xl p-8 shadow-lg border border-gray-200">
            <div class="text-center mb-6">
              <h3 class="text-xl font-semibold text-gray-900 mb-2">Tell Us Your Needs</h3>
              <p class="text-gray-600">We'll match you with perfect properties within 24 hours</p>
            </div>

            <form id="custom-requirements-form" class="space-y-6">
              <!-- Contact Information -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label for="req-name" class="block text-sm font-medium text-gray-700 mb-2">
                    Full Name *
                  </label>
                  <input
                    type="text"
                    id="req-name"
                    name="name"
                    required
                    class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sba-navy/20 focus:border-sba-navy bg-white transition-all duration-300"
                    placeholder="Your name"
                  />
                </div>
                <div>
                  <label for="req-email" class="block text-sm font-medium text-gray-700 mb-2">
                    Email Address *
                  </label>
                  <input
                    type="email"
                    id="req-email"
                    name="email"
                    required
                    class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sba-navy/20 focus:border-sba-navy bg-white transition-all duration-300"
                    placeholder="your@email.com"
                  />
                </div>
              </div>

              <!-- Phone and Company -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label for="req-phone" class="block text-sm font-medium text-gray-700 mb-2">
                    Phone Number *
                  </label>
                  <input
                    type="tel"
                    id="req-phone"
                    name="phone"
                    required
                    class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sba-navy/20 focus:border-sba-navy bg-white transition-all duration-300"
                    placeholder="(555) 123-4567"
                  />
                </div>
                <div>
                  <label for="req-company" class="block text-sm font-medium text-gray-700 mb-2">
                    Company
                  </label>
                  <input
                    type="text"
                    id="req-company"
                    name="company"
                    class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sba-navy/20 focus:border-sba-navy bg-white transition-all duration-300"
                    placeholder="Company name"
                  />
                </div>
              </div>

              <!-- Requirements -->
              <div>
                <label for="req-message" class="block text-sm font-medium text-gray-700 mb-2">
                  Your Requirements *
                </label>
                <textarea
                  id="req-message"
                  name="message"
                  rows="4"
                  required
                  class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sba-navy/20 focus:border-sba-navy bg-white resize-none transition-all duration-300"
                  placeholder="Tell us about your space requirements: size, location, features, timeline, budget..."
                ></textarea>
              </div>

              <!-- Submit Button -->
              <div>
                <button
                  type="submit"
                  id="req-submit-btn"
                  class="w-full px-6 py-3 bg-sba-navy text-white rounded-lg font-semibold hover:bg-sba-navy-dark transition-all duration-200 disabled:opacity-50"
                >
                  <span class="submit-text">Send Requirements</span>
                  <span class="loading-text hidden">Sending...</span>
                </button>
              </div>

              <!-- Success Message -->
              <div id="req-success" class="hidden bg-green-50 border border-green-200 rounded-lg p-6 text-center">
                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                  <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                  </svg>
                </div>
                <h4 class="font-semibold text-green-900 mb-2">Requirements Received!</h4>
                <p class="text-green-700 text-sm">
                  We'll search our database and contact you within 24 hours with matching properties.
                </p>
              </div>
            </form>
          </div>

        </div>
      </div>
    </section>

  </main>

  <Footer />
</BaseLayout>

<style>
  /* Select dropdown styling to match homepage */
  select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 12px center;
    background-repeat: no-repeat;
    background-size: 16px;
  }

  select:focus {
    outline: none;
  }
</style>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    // Handle custom requirements form submission
    const requirementsForm = document.getElementById('custom-requirements-form');
    if (requirementsForm) {
      requirementsForm.addEventListener('submit', async function(e) {
        e.preventDefault();

        const submitBtn = document.getElementById('req-submit-btn');
        const submitText = submitBtn.querySelector('.submit-text');
        const loadingText = submitBtn.querySelector('.loading-text');
        const successDiv = document.getElementById('req-success');

        // Show loading state
        submitBtn.disabled = true;
        submitText.classList.add('hidden');
        loadingText.classList.remove('hidden');

        try {
          // Collect form data
          const formData = new FormData(requirementsForm);
          const data = Object.fromEntries(formData.entries());

          // Split name into first_name and last_name for CRM API
          if (data.name) {
            const nameParts = data.name.trim().split(' ');
            data.first_name = nameParts[0] || '';
            data.last_name = nameParts.slice(1).join(' ') || '';
          }

          // Add requirements-specific metadata
          data.source = 'custom_requirements_form';
          data.type = 'custom_requirements';
          data.lead_source = 'contact_page_requirements';
          data.status = 'new';
          data.appointmentDate = new Date().toISOString().split('T')[0]; // Required by CRM API
          data.appointmentTime = '12:00 PM'; // Default time for non-tour leads

          // Submit to CRM function
          const response = await fetch('/.netlify/functions/process-requirements', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
          });

          if (response.ok) {
            // Show success message
            requirementsForm.classList.add('hidden');
            successDiv.classList.remove('hidden');

            // Scroll to success message
            successDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
          } else {
            throw new Error('Requirements submission failed');
          }
        } catch (error) {
          console.error('Error submitting requirements:', error);
          alert('There was an error sending your requirements. Please try again or call us directly at (954) 614-5352.');

          // Reset button state
          submitBtn.disabled = false;
          submitText.classList.remove('hidden');
          loadingText.classList.add('hidden');
        }
      });
    }
  });
</script>

